# Server DNS Handler
این ماژول یک سرور DNS است که بسته‌های رمزنگاری شده از کلاینت را بازمی‌کند و داده‌های downstream را در TXT رکورد برمی‌گرداند.

## اجزاء کلیدی
- `dns_handler.go`: `Server`، `ServerConfig`، مدیریت جلسه‌ها، reassembly بر اساس Seq، انکود کردن/دیکد کردن payload و ساخت پاسخ TXT را پیاده‌سازی می‌کند.
- `main.go`: جایگزینی ساده تا بسته قابل کامپایل بماند، در آینده entry point اصلی را در این فایل پیاده کنید.

## روند کار
1. درخواست DNS را تحلیل می‌کند، domain را به رشته رمز شده تبدیل می‌کند، سپس nonce+ciphertext را با ChaCha20-Poly1305 باز می‌کند.
2. بسته‌ها را در Radix tree session نگه می‌دارد تا دنباله‌های ناقص منتظر بمانند.
3. داده‌های downstream را یا از `PayloadSink` می‌گیرد یا ACK می‌فرستد، سپس آن‌ها را رمزنگاری کرده و داخل TXT پاسخ DNS قرار می‌دهد.

## توسعه
برای نوشتن خروجی به شبکه/فایل از `PayloadSink` استفاده کنید؛ در آینده handler UDP را با TLS یا رابط کنترل‌شده ترکیب کنید.
